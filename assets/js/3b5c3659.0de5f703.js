"use strict";(self.webpackChunkx_fidelity_website=self.webpackChunkx_fidelity_website||[]).push([[9653],{8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var s=i(6540);const l={},r=s.createContext(l);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},8901:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"local-configuration","title":"Local Configuration","description":"x-fidelity supports local configuration for development and testing purposes.","source":"@site/docs/local-configuration.md","sourceDirName":".","slug":"/local-configuration","permalink":"/x-fidelity/docs/local-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/zotoio/x-fidelity/edit/main/website/docs/local-configuration.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8}}');var l=i(4848),r=i(8453);const o={sidebar_position:8},t="Local Configuration",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Usage",id:"usage",level:2},{value:"Configuration Files",id:"configuration-files",level:2},{value:"Repository Configuration (.xfi-config.json)",id:"repository-configuration-xfi-configjson",level:3},{value:"sensitiveFileFalsePositives",id:"sensitivefilefalsepositives",level:4},{value:"additionalRules",id:"additionalrules",level:4},{value:"additionalFacts",id:"additionalfacts",level:4},{value:"additionalOperators",id:"additionaloperators",level:4},{value:"additionalPlugins",id:"additionalplugins",level:4},{value:"notifications",id:"notifications",level:4},{value:"Archetype Configuration",id:"archetype-configuration",level:3},{value:"Rule Configuration",id:"rule-configuration",level:3},{value:"Exemption Configuration",id:"exemption-configuration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"local-configuration",children:"Local Configuration"})}),"\n",(0,l.jsx)(n.p,{children:"x-fidelity supports local configuration for development and testing purposes."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Local configuration allows you to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Test rules offline"}),"\n",(0,l.jsx)(n.li,{children:"Develop new rules"}),"\n",(0,l.jsx)(n.li,{children:"Customize archetypes"}),"\n",(0,l.jsx)(n.li,{children:"Add custom rules, facts, operators and plugins"}),"\n",(0,l.jsx)(n.li,{children:"Configure notifications"}),"\n",(0,l.jsx)(n.li,{children:"Iterate quickly"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"config/\n\u251c\u2500\u2500 archetypes/\n\u2502   \u251c\u2500\u2500 node-fullstack.json\n\u2502   \u2514\u2500\u2500 java-microservice.json\n\u251c\u2500\u2500 rules/\n\u2502   \u251c\u2500\u2500 sensitiveLogging-iterative.json\n\u2502   \u2514\u2500\u2500 outdatedFramework-global.json\n\u2514\u2500\u2500 exemptions/\n    \u251c\u2500\u2500 node-fullstack-exemptions/\n    \u2502   \u251c\u2500\u2500 team1-exemptions.json\n    \u2502   \u2514\u2500\u2500 team2-exemptions.json\n    \u2514\u2500\u2500 java-microservice-exemptions/\n        \u2514\u2500\u2500 team3-exemptions.json\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.p,{children:"Run x-fidelity with local config:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"xfidelity . --localConfigPath ./config\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,l.jsx)(n.h3,{id:"repository-configuration-xfi-configjson",children:"Repository Configuration (.xfi-config.json)"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:".xfi-config.json"})," file in your repository root allows you to customize x-fidelity's behavior:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "sensitiveFileFalsePositives": [\n        "/src/facts/repoFilesystemFacts.ts"\n    ],\n    "additionalRules": [\n        {\n            "name": "custom-rule",\n            "conditions": {\n                "all": [\n                    {\n                        "fact": "fileData",\n                        "path": "$.fileName", \n                        "operator": "equal",\n                        "value": "REPO_GLOBAL_CHECK"\n                    }\n                ]\n            },\n            "event": {\n                "type": "warning",\n                "params": {\n                    "message": "Custom rule detected matching data"\n                }\n            }\n        },\n        {\n            "name": "referenced-rule",\n            "path": "rules/custom-rule.json"\n        },\n        {\n            "name": "remote-rule", \n            "url": "https://example.com/rules/custom-rule.json"\n        }\n    ],\n    "additionalFacts": ["customFact"],\n    "additionalOperators": ["customOperator"],\n    "additionalPlugins": ["xfiPluginSimpleExample"],\n    "notifications": {\n        "recipients": {\n            "email": ["team@example.com"],\n            "slack": ["U123456", "U789012"],\n            "teams": ["user1@example.com", "user2@example.com"]\n        },\n        "codeOwners": true,\n        "notifyOnSuccess": false,\n        "notifyOnFailure": true,\n        "customTemplates": {\n            "success": "All checks passed successfully! \ud83c\udf89\\n\\nArchetype: ${archetype}\\nFiles analyzed: ${fileCount}\\nExecution time: ${executionTime}s",\n            "failure": "Issues found in codebase:\\n\\nArchetype: ${archetype}\\nTotal issues: ${totalIssues}\\n- Warnings: ${warningCount}\\n- Errors: ${errorCount}\\n- Fatalities: ${fatalityCount}\\n\\nAffected files:\\n${affectedFiles}"\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h4,{id:"sensitivefilefalsepositives",children:"sensitiveFileFalsePositives"}),"\n",(0,l.jsx)(n.p,{children:"An array of file paths relative to your repository root that should be excluded from sensitive data checks."}),"\n",(0,l.jsx)(n.h4,{id:"additionalrules",children:"additionalRules"}),"\n",(0,l.jsx)(n.p,{children:"An array of custom rules to add to your configuration. Rules can be specified in multiple flexible ways:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Inline Rules"}),": Define the complete rule configuration directly in the config file:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "custom-inline-rule",\n    "conditions": {\n        "all": [\n            {\n                "fact": "fileData",\n                "operator": "regexMatch", \n                "value": "password"\n            }\n        ]\n    },\n    "event": {\n        "type": "warning",\n        "params": {\n            "message": "Found sensitive data"\n        }\n    }\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Local File References"}),": Reference rule files using paths that can be:"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"a) Relative to repository root:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "sensitiveLogging-iterative",\n    "path": "src/demoConfig/rules/sensitiveLogging-iterative-rule.json"\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"b) Relative to local config directory (if using --localConfigPath):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "local-rule",\n    "path": "rules/custom-rule.json"\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"c) Relative to plugin directory (for plugin-provided rules):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "functionComplexity-iterative",\n    "path": "src/plugins/xfiPluginAst/sampleRules/functionComplexity-iterative-rule.json"\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"path"})," property supports:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Glob patterns (e.g. ",(0,l.jsx)(n.code,{children:"rules/*.json"}),", ",(0,l.jsx)(n.code,{children:"**/*-rule.json"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:["Multiple base directories searched in order:","\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Local config directory (if --localConfigPath is specified)"}),"\n",(0,l.jsx)(n.li,{children:"Current working directory"}),"\n",(0,l.jsx)(n.li,{children:"Repository root"}),"\n",(0,l.jsx)(n.li,{children:"Plugin directories (for plugin rules)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Example using glob pattern:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "all-iterative-rules",\n    "path": "**/*-iterative-rule.json"\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Remote Rules"}),": Load rules from remote URLs:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "remote-rule",\n    "url": "https://example.com/rules/custom-rule.json"\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Remote rules support:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"HTTPS URLs"}),"\n",(0,l.jsx)(n.li,{children:"Authentication headers"}),"\n",(0,l.jsx)(n.li,{children:"Automatic retries with exponential backoff"}),"\n",(0,l.jsx)(n.li,{children:"Error handling with detailed logging"}),"\n",(0,l.jsx)(n.li,{children:"Response validation"}),"\n",(0,l.jsx)(n.li,{children:"Caching with TTL"}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reference Existing Rules"}),": Reference rules from archetypes:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "sensitiveLogging-iterative",\n    "path": "src/demoConfig/rules/sensitiveLogging-iterative-rule.json"\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Plugin Rules"}),": Load rules provided by plugins:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "additionalPlugins": ["xfiPluginAst"],\n    "additionalRules": [\n        {\n            "name": "functionComplexity-iterative",\n            "path": "src/plugins/xfiPluginAst/sampleRules/functionComplexity-iterative-rule.json"\n        }\n    ]\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Rules are loaded in the order specified. For each rule:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"The rule is validated against the schema"}),"\n",(0,l.jsx)(n.li,{children:"For path/URL rules, the first valid rule found is used"}),"\n",(0,l.jsx)(n.li,{children:"Invalid rules are skipped with a warning"}),"\n",(0,l.jsx)(n.li,{children:"Rules can be exempted via exemptions config"}),"\n",(0,l.jsx)(n.li,{children:"Duplicate rules (same name) are skipped"}),"\n",(0,l.jsx)(n.li,{children:"Plugin rules are loaded after archetype rules"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Each rule must follow the standard rule schema with:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"name"}),": Unique identifier for the rule"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"conditions"}),": Rule conditions using facts and operators"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"event"}),": The event to trigger when conditions match"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"errorBehavior"}),': Optional "swallow" or "fatal"']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"onError"}),": Optional error handling configuration"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Rule Loading Order:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Archetype rules (from config server or local config)"}),"\n",(0,l.jsx)(n.li,{children:"Plugin rules (from installed plugins)"}),"\n",(0,l.jsxs)(n.li,{children:["Additional rules from .xfi-config.json:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Inline rules"}),"\n",(0,l.jsx)(n.li,{children:"Local file rules"}),"\n",(0,l.jsx)(n.li,{children:"Remote URL rules"}),"\n",(0,l.jsx)(n.li,{children:"Referenced rules"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Duplicate Rule Handling:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Rules with the same name are not loaded twice"}),"\n",(0,l.jsx)(n.li,{children:"First rule loaded takes precedence"}),"\n",(0,l.jsx)(n.li,{children:"Warning logged for duplicate rule names"}),"\n",(0,l.jsx)(n.li,{children:"Archetype rules take precedence over additional rules"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"additionalfacts",children:"additionalFacts"}),"\n",(0,l.jsx)(n.p,{children:"An array of fact names to enable from installed plugins or custom implementations."}),"\n",(0,l.jsx)(n.h4,{id:"additionaloperators",children:"additionalOperators"}),"\n",(0,l.jsx)(n.p,{children:"An array of operator names to enable from installed plugins or custom implementations."}),"\n",(0,l.jsx)(n.h4,{id:"additionalplugins",children:"additionalPlugins"}),"\n",(0,l.jsx)(n.p,{children:"An array of plugin names to load. Plugins can provide additional facts, operators and rules."}),"\n",(0,l.jsx)(n.h4,{id:"notifications",children:"notifications"}),"\n",(0,l.jsx)(n.p,{children:"Configure notification settings for analysis results:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"recipients"})," - Configure recipients for different notification channels"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"codeOwners"})," - Enable/disable notifications to code owners (defaults to true)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"notifyOnSuccess"})," - Send notifications for successful checks"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"notifyOnFailure"})," - Send notifications for failed checks"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"customTemplates"})," - Custom notification message templates"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"archetype-configuration",children:"Archetype Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Example ",(0,l.jsx)(n.code,{children:"node-fullstack.json"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "node-fullstack",\n    "rules": [\n        "sensitiveLogging-iterative",\n        "outdatedFramework-global"\n    ],\n    "operators": [\n        "fileContains",\n        "outdatedFramework"\n    ],\n    "facts": [\n        "repoFilesystemFacts",\n        "repoDependencyFacts"\n    ],\n    "config": {\n        "minimumDependencyVersions": {\n            "react": ">=17.0.0"\n        },\n        "standardStructure": {\n            "src": {\n                "components": null,\n                "utils": null\n            }\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"rule-configuration",children:"Rule Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Example ",(0,l.jsx)(n.code,{children:"sensitiveLogging-iterative.json"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "name": "sensitiveLogging-iterative",\n    "conditions": {\n        "all": [\n            {\n                "fact": "fileContent",\n                "operator": "contains",\n                "value": "password"\n            }\n        ]\n    },\n    "event": {\n        "type": "warning",\n        "params": {\n            "message": "Potential sensitive data exposure"\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"exemption-configuration",children:"Exemption Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Example ",(0,l.jsx)(n.code,{children:"team1-exemptions.json"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "repoUrl": "git@github.com:org/repo.git",\n        "rule": "outdatedFramework-global",\n        "expirationDate": "2024-12-31",\n        "reason": "Upgrade scheduled for Q4"\n    }\n]\n'})}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Version Control"}),": Keep configurations in version control"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Documentation"}),": Document custom rules and archetypes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Testing"}),": Test configurations before deployment"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Organization"}),": Use clear naming conventions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Maintenance"}),": Regularly review and update configurations"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Security"}),": Validate remote rule sources"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Modularity"}),": Break complex rules into smaller, reusable components"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Validation"}),": Test rules with sample data before deployment"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Learn about ",(0,l.jsx)(n.a,{href:"remote-configuration",children:"Remote Configuration"})]}),"\n",(0,l.jsxs)(n.li,{children:["Explore ",(0,l.jsx)(n.a,{href:"archetypes",children:"Archetypes"})]}),"\n",(0,l.jsxs)(n.li,{children:["Create custom ",(0,l.jsx)(n.a,{href:"rules",children:"Rules"})]}),"\n",(0,l.jsxs)(n.li,{children:["Develop ",(0,l.jsx)(n.a,{href:"plugins/overview",children:"Plugins"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);