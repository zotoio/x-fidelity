"use strict";(self.webpackChunkx_fidelity_website=self.webpackChunkx_fidelity_website||[]).push([[4070],{4624:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"operators","title":"Operators","description":"x-fidelity includes several built-in operators that can be used in your rules to evaluate conditions. Here\'s a comprehensive guide to each operator.","source":"@site/docs/operators.md","sourceDirName":".","slug":"/operators","permalink":"/x-fidelity/docs/operators","draft":false,"unlisted":false,"editUrl":"https://github.com/zotoio/x-fidelity/edit/main/website/docs/operators.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docs","previous":{"title":"Rules","permalink":"/x-fidelity/docs/rules"},"next":{"title":"Facts","permalink":"/x-fidelity/docs/facts"}}');var r=i(4848),l=i(8453);const t={sidebar_position:6},a="Operators",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Built-in Operators",id:"built-in-operators",level:2},{value:"<code>fileContains</code>",id:"filecontains",level:3},{value:"<code>outdatedFramework</code>",id:"outdatedframework",level:3},{value:"<code>nonStandardDirectoryStructure</code>",id:"nonstandarddirectorystructure",level:3},{value:"<code>openaiAnalysisHighSeverity</code>",id:"openaianalysishighseverity",level:3},{value:"<code>globalPatternRatio</code>",id:"globalpatternratio",level:3},{value:"<code>globalPatternCount</code>",id:"globalpatterncount",level:3},{value:"<code>hasFilesWithMultiplePatterns</code>",id:"hasfileswithmultiplepatterns",level:3},{value:"<code>regexMatch</code>",id:"regexmatch",level:3},{value:"<code>invalidRemoteValidation</code>",id:"invalidremotevalidation",level:3},{value:"<code>missingRequiredFiles</code>",id:"missingrequiredfiles",level:3},{value:"<code>astComplexity</code>",id:"astcomplexity",level:3},{value:"<code>functionCount</code>",id:"functioncount",level:3},{value:"Creating Custom Operators",id:"creating-custom-operators",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"operators",children:"Operators"})}),"\n",(0,r.jsx)(n.p,{children:"x-fidelity includes several built-in operators that can be used in your rules to evaluate conditions. Here's a comprehensive guide to each operator."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Operators are functions that:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Evaluate conditions in rules"}),"\n",(0,r.jsx)(n.li,{children:"Return boolean values (true indicates a rule failure)"}),"\n",(0,r.jsx)(n.li,{children:"Can be customized and extended"}),"\n",(0,r.jsx)(n.li,{children:"Support both simple and complex validations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"built-in-operators",children:"Built-in Operators"}),"\n",(0,r.jsx)(n.h3,{id:"filecontains",children:(0,r.jsx)(n.code,{children:"fileContains"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if files contain specific patterns or strings."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "repoFileAnalysis",\n    "params": {\n        "checkPattern": ["password", "apiKey"],\n        "resultFact": "fileResults"\n    },\n    "operator": "fileContains",\n    "value": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Supports multiple patterns"}),"\n",(0,r.jsx)(n.li,{children:"Line number tracking"}),"\n",(0,r.jsx)(n.li,{children:"Sensitive data masking"}),"\n",(0,r.jsx)(n.li,{children:"Multi-line content analysis"}),"\n",(0,r.jsx)(n.li,{children:"Long line splitting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"outdatedframework",children:(0,r.jsx)(n.code,{children:"outdatedFramework"})}),"\n",(0,r.jsx)(n.p,{children:"Verifies dependency versions against minimum requirements."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "repoDependencyAnalysis",\n    "params": {\n        "resultFact": "dependencyResults",\n        "minimumDependencyVersions": {\n            "react": ">=17.0.0",\n            "typescript": "^4.0.0"\n        }\n    },\n    "operator": "outdatedFramework",\n    "value": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Semver range support"}),"\n",(0,r.jsx)(n.li,{children:"Nested dependency checking"}),"\n",(0,r.jsx)(n.li,{children:"Pre-release version handling"}),"\n",(0,r.jsx)(n.li,{children:"Package manager compatibility (npm, yarn, pnpm)"}),"\n",(0,r.jsx)(n.li,{children:"Build metadata support"}),"\n",(0,r.jsx)(n.li,{children:"Complex version ranges"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"nonstandarddirectorystructure",children:(0,r.jsx)(n.code,{children:"nonStandardDirectoryStructure"})}),"\n",(0,r.jsx)(n.p,{children:"Validates project directory structure against defined standards."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "fileData",\n    "path": "$.filePath",\n    "operator": "nonStandardDirectoryStructure",\n    "value": {\n        "fact": "standardStructure"\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Recursive directory validation"}),"\n",(0,r.jsx)(n.li,{children:"Blacklist/whitelist support"}),"\n",(0,r.jsx)(n.li,{children:"Symlink handling"}),"\n",(0,r.jsx)(n.li,{children:"Path traversal protection"}),"\n",(0,r.jsx)(n.li,{children:"Detailed reporting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"openaianalysishighseverity",children:(0,r.jsx)(n.code,{children:"openaiAnalysisHighSeverity"})}),"\n",(0,r.jsx)(n.p,{children:"Evaluates AI-generated analysis results for high-severity issues."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "openaiAnalysis",\n    "params": {\n        "prompt": "Identify security issues",\n        "resultFact": "securityAnalysis"\n    },\n    "operator": "openaiAnalysisHighSeverity",\n    "value": 8\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configurable severity threshold"}),"\n",(0,r.jsx)(n.li,{children:"Detailed issue reporting"}),"\n",(0,r.jsx)(n.li,{children:"AI-powered analysis"}),"\n",(0,r.jsx)(n.li,{children:"Custom prompt support"}),"\n",(0,r.jsx)(n.li,{children:"Error handling for AI responses"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"globalpatternratio",children:(0,r.jsx)(n.code,{children:"globalPatternRatio"})}),"\n",(0,r.jsx)(n.p,{children:"Evaluates the ratio of new API patterns to legacy patterns across the codebase."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "globalFileAnalysis",\n    "params": {\n        "newPatterns": ["newApiMethod\\\\("],\n        "legacyPatterns": ["legacyApiMethod\\\\("],\n        "fileFilter": "\\\\.(ts|js)$",\n        "resultFact": "apiMigrationAnalysis"\n    },\n    "operator": "globalPatternRatio",\n    "value": {\n        "threshold": 0.8,\n        "comparison": "gte"\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Measures adoption of new APIs"}),"\n",(0,r.jsx)(n.li,{children:"Tracks deprecation of legacy code"}),"\n",(0,r.jsx)(n.li,{children:"Configurable threshold"}),"\n",(0,r.jsx)(n.li,{children:"Supports multiple patterns"}),"\n",(0,r.jsx)(n.li,{children:"Flexible comparison types (gte/lte)"}),"\n",(0,r.jsx)(n.li,{children:"Detailed statistics"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"globalpatterncount",children:(0,r.jsx)(n.code,{children:"globalPatternCount"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if a pattern appears a certain number of times across the codebase."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "globalFileAnalysis",\n    "params": {\n        "newPatterns": ["requiredMethod\\\\("],\n        "fileFilter": "\\\\.(ts|js)$",\n        "resultFact": "requiredMethodAnalysis"\n    },\n    "operator": "globalPatternCount",\n    "value": {\n        "threshold": 10,\n        "comparison": "gte"\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensures minimum/maximum usage of patterns"}),"\n",(0,r.jsx)(n.li,{children:"Supports multiple patterns"}),"\n",(0,r.jsx)(n.li,{children:"Configurable threshold"}),"\n",(0,r.jsx)(n.li,{children:"Flexible comparison types (gte/lte)"}),"\n",(0,r.jsx)(n.li,{children:"Detailed match information"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"hasfileswithmultiplepatterns",children:(0,r.jsx)(n.code,{children:"hasFilesWithMultiplePatterns"})}),"\n",(0,r.jsx)(n.p,{children:"Identifies files that contain multiple specified patterns."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "globalFileAnalysis",\n    "params": {\n        "patterns": ["pattern1\\\\(", "pattern2\\\\("],\n        "fileFilter": "\\\\.(ts|js)$",\n        "outputGrouping": "file",\n        "resultFact": "multiPatternAnalysis"\n    },\n    "operator": "hasFilesWithMultiplePatterns",\n    "value": 2\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Finds files with multiple patterns"}),"\n",(0,r.jsx)(n.li,{children:"Configurable threshold for pattern count"}),"\n",(0,r.jsx)(n.li,{children:"Works with file-centric output grouping"}),"\n",(0,r.jsx)(n.li,{children:"Detailed file reporting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"regexmatch",children:(0,r.jsx)(n.code,{children:"regexMatch"})}),"\n",(0,r.jsx)(n.p,{children:"Tests if a string matches a regular expression pattern."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "fileData",\n    "path": "$.filePath",\n    "operator": "regexMatch",\n    "value": "^.*\\\\/facts\\\\/(?!.*\\\\.test).*\\\\.ts$"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Supports complex regex patterns"}),"\n",(0,r.jsx)(n.li,{children:"Handles regex flags"}),"\n",(0,r.jsx)(n.li,{children:"Supports /pattern/flags format"}),"\n",(0,r.jsx)(n.li,{children:"Detailed error reporting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"invalidremotevalidation",children:(0,r.jsx)(n.code,{children:"invalidRemoteValidation"})}),"\n",(0,r.jsx)(n.p,{children:"Validates extracted strings against remote endpoints."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "remoteSubstringValidation",\n    "params": {\n        "pattern": "\\"systemId\\":[\\\\s]*\\"([a-z]*)\\"",\n        "flags": "gi",\n        "validationParams": {\n            "url": "http://validator.example.com/check",\n            "method": "POST",\n            "headers": {\n                "Content-Type": "application/json"\n            },\n            "body": {\n                "systemId": "#MATCH#"\n            },\n            "checkJsonPath": "$.validSystems[?(@.id == \'#MATCH#\')]"\n        },\n        "resultFact": "validationResult"\n    },\n    "operator": "invalidRemoteValidation",\n    "value": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Remote API integration"}),"\n",(0,r.jsx)(n.li,{children:"Pattern extraction with flags"}),"\n",(0,r.jsx)(n.li,{children:"JSONPath validation"}),"\n",(0,r.jsx)(n.li,{children:"Flexible HTTP methods"}),"\n",(0,r.jsx)(n.li,{children:"Custom headers and body"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"missingrequiredfiles",children:(0,r.jsx)(n.code,{children:"missingRequiredFiles"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if required files are missing from the repository."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "missingRequiredFiles",\n    "params": {\n        "requiredFiles": [\n            "/README.md",\n            "/CONTRIBUTING.md",\n            "/LICENSE"\n        ],\n        "resultFact": "missingRequiredFilesResult"\n    },\n    "operator": "missingRequiredFiles",\n    "value": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Path pattern matching"}),"\n",(0,r.jsx)(n.li,{children:"Detailed reporting"}),"\n",(0,r.jsx)(n.li,{children:"Support for glob patterns"}),"\n",(0,r.jsx)(n.li,{children:"Path normalization"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"astcomplexity",children:(0,r.jsx)(n.code,{children:"astComplexity"})}),"\n",(0,r.jsx)(n.p,{children:"Evaluates code complexity metrics from AST analysis."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "functionComplexity",\n    "params": {\n        "resultFact": "complexityResult",\n        "thresholds": {\n            "cyclomaticComplexity": 20,\n            "cognitiveComplexity": 30,\n            "nestingDepth": 10,\n            "parameterCount": 5,\n            "returnCount": 10\n        }\n    },\n    "operator": "astComplexity",\n    "value": {\n        "cyclomaticComplexity": 20,\n        "cognitiveComplexity": 30,\n        "nestingDepth": 10,\n        "parameterCount": 5,\n        "returnCount": 10\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple complexity metrics"}),"\n",(0,r.jsx)(n.li,{children:"Configurable thresholds"}),"\n",(0,r.jsx)(n.li,{children:"Function-level analysis"}),"\n",(0,r.jsx)(n.li,{children:"Detailed reporting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"functioncount",children:(0,r.jsx)(n.code,{children:"functionCount"})}),"\n",(0,r.jsx)(n.p,{children:"Checks if a file contains too many functions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "fact": "functionCount",\n    "params": {\n        "resultFact": "functionCountResult"\n    },\n    "operator": "functionCount",\n    "value": 20\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Counts all function types"}),"\n",(0,r.jsx)(n.li,{children:"Configurable threshold"}),"\n",(0,r.jsx)(n.li,{children:"Detailed reporting"}),"\n",(0,r.jsx)(n.li,{children:"File-level analysis"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-custom-operators",children:"Creating Custom Operators"}),"\n",(0,r.jsx)(n.p,{children:"You can create custom operators by:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Implementing the ",(0,r.jsx)(n.code,{children:"OperatorDefn"})," interface:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface OperatorDefn {\n    name: string;\n    fn: (factValue: any, params: any) => boolean;\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Creating the operator function:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const customOperator = {\n    name: 'customOperator',\n    fn: (factValue, params) => {\n        try {\n            // Your logic here\n            return true; // or false\n        } catch (e) {\n            logger.error(`customOperator error: ${e}`);\n            return false;\n        }\n    }\n};\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Adding it to your plugin:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n    name: 'my-plugin',\n    version: '1.0.0',\n    operators: [customOperator]\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error Handling"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always include try/catch blocks"}),"\n",(0,r.jsx)(n.li,{children:"Log errors appropriately"}),"\n",(0,r.jsx)(n.li,{children:"Return false for non-fatal errors"}),"\n",(0,r.jsx)(n.li,{children:"Provide detailed error messages"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keep operations lightweight"}),"\n",(0,r.jsx)(n.li,{children:"Cache results when possible"}),"\n",(0,r.jsx)(n.li,{children:"Use async/await for I/O operations"}),"\n",(0,r.jsx)(n.li,{children:"Log performance metrics"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Security"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validate all inputs"}),"\n",(0,r.jsx)(n.li,{children:"Protect against path traversal"}),"\n",(0,r.jsx)(n.li,{children:"Handle sensitive data carefully"}),"\n",(0,r.jsx)(n.li,{children:"Use maskSensitiveData for logging"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Testing"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Write comprehensive unit tests"}),"\n",(0,r.jsx)(n.li,{children:"Test edge cases and boundary conditions"}),"\n",(0,r.jsx)(n.li,{children:"Mock external dependencies"}),"\n",(0,r.jsx)(n.li,{children:"Test error handling"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Flexibility"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Support multiple input formats"}),"\n",(0,r.jsx)(n.li,{children:"Provide configurable options"}),"\n",(0,r.jsx)(n.li,{children:"Handle edge cases gracefully"}),"\n",(0,r.jsx)(n.li,{children:"Document expected inputs and outputs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Learn about ",(0,r.jsx)(n.a,{href:"facts",children:"Facts"})]}),"\n",(0,r.jsxs)(n.li,{children:["Explore ",(0,r.jsx)(n.a,{href:"rules",children:"Rules"})]}),"\n",(0,r.jsxs)(n.li,{children:["Create ",(0,r.jsx)(n.a,{href:"plugins/overview",children:"Custom Plugins"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);