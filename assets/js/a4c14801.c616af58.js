"use strict";(self.webpackChunkx_fidelity_website=self.webpackChunkx_fidelity_website||[]).push([[3005],{2182:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"config-server","title":"Config Server","description":"The x-fidelity config server provides centralized configuration management and real-time updates for your rules and archetypes.","source":"@site/docs/config-server.md","sourceDirName":".","slug":"/config-server","permalink":"/x-fidelity/docs/config-server","draft":false,"unlisted":false,"editUrl":"https://github.com/zotoio/x-fidelity/edit/main/website/docs/config-server.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"docs","previous":{"title":"Environment Variables","permalink":"/x-fidelity/docs/environment-variables"},"next":{"title":"Docker Deployment","permalink":"/x-fidelity/docs/docker-deployment"}}');var s=i(4848),l=i(8453);const t={sidebar_position:11},c="Config Server",d={},h=[{value:"Overview",id:"overview",level:2},{value:"Server Setup",id:"server-setup",level:2},{value:"Using Docker",id:"using-docker",level:3},{value:"Manual Setup",id:"manual-setup",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Archetypes",id:"archetypes",level:3},{value:"Telemetry",id:"telemetry",level:3},{value:"Cache Management",id:"cache-management",level:3},{value:"GitHub Webhooks",id:"github-webhooks",level:3},{value:"Security Features",id:"security-features",level:2},{value:"Authentication",id:"authentication",level:3},{value:"HTTPS/TLS",id:"httpstls",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Caching",id:"caching",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"config-server",children:"Config Server"})}),"\n",(0,s.jsx)(n.p,{children:"The x-fidelity config server provides centralized configuration management and real-time updates for your rules and archetypes."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The config server:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Serves archetype configurations"}),"\n",(0,s.jsx)(n.li,{children:"Distributes rules"}),"\n",(0,s.jsx)(n.li,{children:"Manages exemptions"}),"\n",(0,s.jsx)(n.li,{children:"Collects telemetry"}),"\n",(0,s.jsx)(n.li,{children:"Handles GitHub webhooks"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"server-setup",children:"Server Setup"}),"\n",(0,s.jsx)(n.h3,{id:"using-docker",children:"Using Docker"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"services:\n  x-fidelity-server:\n    build: .\n    ports:\n      - 8888:8888\n    volumes:\n      - ./config:/usr/src/app/config\n    environment:\n      - NODE_ENV=production\n      - XFI_LISTEN_PORT=8888\n      - CERT_PATH=/usr/src/app/certs\n      - XFI_SHARED_SECRET=your_secret_here\n"})}),"\n",(0,s.jsx)(n.h3,{id:"manual-setup",children:"Manual Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"xfidelity --mode server --port 8888\n"})}),"\n",(0,s.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,s.jsx)(n.h3,{id:"archetypes",children:"Archetypes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /archetypes/:archetype"}),": Get archetype configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /archetypes/:archetype/rules"}),": Get rules for archetype"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /archetypes/:archetype/rules/:rule"}),": Get specific rule"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /archetypes/:archetype/exemptions"}),": Get exemptions"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"telemetry",children:"Telemetry"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /telemetry"}),": Submit telemetry data"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cache-management",children:"Cache Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /clearcache"}),": Clear server cache"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /viewcache"}),": View cache contents"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"github-webhooks",children:"GitHub Webhooks"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /github-config-update"}),": Update config from GitHub"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /github-pull-request-check"}),": Check pull requests"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"security-features",children:"Security Features"}),"\n",(0,s.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsx)(n.p,{children:"Uses shared secret authentication:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export XFI_SHARED_SECRET=your_secret_here\n"})}),"\n",(0,s.jsx)(n.h3,{id:"httpstls",children:"HTTPS/TLS"}),"\n",(0,s.jsx)(n.p,{children:"Supports HTTPS with:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Self-signed certificates"}),"\n",(0,s.jsx)(n.li,{children:"Custom certificates"}),"\n",(0,s.jsx)(n.li,{children:"Certificate path configuration"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,s.jsx)(n.p,{children:"Configurable rate limiting:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Default: 10,000 requests per minute"}),"\n",(0,s.jsx)(n.li,{children:"Customizable window and limit"}),"\n",(0,s.jsx)(n.li,{children:"IP-based tracking"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"caching",children:"Caching"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"In-memory caching"}),"\n",(0,s.jsx)(n.li,{children:"Configurable TTL"}),"\n",(0,s.jsx)(n.li,{children:"Cache invalidation on updates"}),"\n",(0,s.jsx)(n.li,{children:"View cache contents"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"XFI_LISTEN_PORT"}),": Server port"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CERT_PATH"}),": SSL certificate path"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"XFI_SHARED_SECRET"}),": Authentication secret"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GITHUB_WEBHOOK_SECRET"}),": GitHub webhook secret"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NODE_TLS_REJECT_UNAUTHORIZED"}),": Allow self-signed certs"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Security"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use HTTPS in production"}),"\n",(0,s.jsx)(n.li,{children:"Set strong secrets"}),"\n",(0,s.jsx)(n.li,{children:"Enable authentication"}),"\n",(0,s.jsx)(n.li,{children:"Configure rate limits"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Performance"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enable caching"}),"\n",(0,s.jsx)(n.li,{children:"Set appropriate TTL"}),"\n",(0,s.jsx)(n.li,{children:"Monitor server load"}),"\n",(0,s.jsx)(n.li,{children:"Scale as needed"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Monitoring"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Collect telemetry"}),"\n",(0,s.jsx)(n.li,{children:"Monitor errors"}),"\n",(0,s.jsx)(n.li,{children:"Track usage"}),"\n",(0,s.jsx)(n.li,{children:"Set up alerts"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Maintenance"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Regular updates"}),"\n",(0,s.jsx)(n.li,{children:"Backup configurations"}),"\n",(0,s.jsx)(n.li,{children:"Monitor disk space"}),"\n",(0,s.jsx)(n.li,{children:"Review logs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Set up ",(0,s.jsx)(n.a,{href:"docker-deployment",children:"Docker Deployment"})]}),"\n",(0,s.jsxs)(n.li,{children:["Configure ",(0,s.jsx)(n.a,{href:"github-webhooks",children:"GitHub Webhooks"})]}),"\n",(0,s.jsxs)(n.li,{children:["Implement ",(0,s.jsx)(n.a,{href:"telemetry",children:"Telemetry"})]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var r=i(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);