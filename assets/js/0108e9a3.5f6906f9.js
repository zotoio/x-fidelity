"use strict";(self.webpackChunkx_fidelity_website=self.webpackChunkx_fidelity_website||[]).push([[236],{7766:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"plugins/creating-plugins","title":"Creating Plugins","description":"This guide walks you through creating custom plugins for x-fidelity.","source":"@site/docs/plugins/creating-plugins.md","sourceDirName":"plugins","slug":"/plugins/creating-plugins","permalink":"/x-fidelity/docs/plugins/creating-plugins","draft":false,"unlisted":false,"editUrl":"https://github.com/zotoio/x-fidelity/edit/main/website/docs/plugins/creating-plugins.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"Plugin Overview","permalink":"/x-fidelity/docs/plugins/overview"},"next":{"title":"Plugin Examples","permalink":"/x-fidelity/docs/plugins/plugin-examples"}}');var t=r(4848),a=r(8453);const i={sidebar_position:2},l="Creating Plugins",c={},o=[{value:"Plugin Structure",id:"plugin-structure",level:2},{value:"Basic Example",id:"basic-example",level:2},{value:"Project Structure",id:"project-structure",level:2},{value:"Creating Facts",id:"creating-facts",level:2},{value:"Creating Operators",id:"creating-operators",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Sample Rules",id:"sample-rules",level:2},{value:"Testing",id:"testing",level:2},{value:"Publishing",id:"publishing",level:2},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"creating-plugins",children:"Creating Plugins"})}),"\n",(0,t.jsx)(n.p,{children:"This guide walks you through creating custom plugins for x-fidelity."}),"\n",(0,t.jsx)(n.h2,{id:"plugin-structure",children:"Plugin Structure"}),"\n",(0,t.jsxs)(n.p,{children:["A basic plugin must implement the ",(0,t.jsx)(n.code,{children:"XFiPlugin"})," interface:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface XFiPlugin {\n    name: string;\n    version: string;\n    facts?: FactDefn[];\n    operators?: OperatorDefn[];\n    onError?: (error: Error) => PluginError;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"basic-example",children:"Basic Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// my-plugin.js\nmodule.exports = {\n    name: 'my-plugin',\n    version: '1.0.0',\n    facts: [{\n        name: 'myCustomFact',\n        fn: async () => ({ result: 'custom data' })\n    }],\n    operators: [{\n        name: 'myCustomOperator',\n        fn: (factValue, expectedValue) => factValue === expectedValue\n    }],\n    onError: (error) => ({\n        message: `Plugin error: ${error.message}`,\n        level: 'warning',\n        details: error.stack\n    })\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my-plugin/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 facts/\n\u2502   \u2502   \u251c\u2500\u2500 customFact.ts\n\u2502   \u2502   \u2514\u2500\u2500 customFact.test.ts\n\u2502   \u251c\u2500\u2500 operators/\n\u2502   \u2502   \u251c\u2500\u2500 customOperator.ts\n\u2502   \u2502   \u2514\u2500\u2500 customOperator.test.ts\n\u2502   \u251c\u2500\u2500 rules/\n\u2502   \u2502   \u2514\u2500\u2500 sampleRules.json\n\u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 jest.config.js\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-facts",children:"Creating Facts"}),"\n",(0,t.jsx)(n.p,{children:"Facts collect and provide data:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface FactDefn {\n    name: string;\n    fn: (params: any, almanac: any) => Promise<any>;\n    priority?: number;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example fact:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const myFact = {\n    name: 'myCustomFact',\n    fn: async (params, almanac) => {\n        try {\n            const data = await collectData(params);\n            return { result: data };\n        } catch (error) {\n            logger.error(`Error in myCustomFact: ${error}`);\n            throw error;\n        }\n    },\n    priority: 1\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-operators",children:"Creating Operators"}),"\n",(0,t.jsx)(n.p,{children:"Operators evaluate conditions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface OperatorDefn {\n    name: string;\n    fn: (factValue: any, params: any) => boolean;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example operator:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const myOperator = {\n    name: 'myCustomOperator',\n    fn: (factValue, expectedValue) => {\n        try {\n            return evaluateCondition(factValue, expectedValue);\n        } catch (error) {\n            logger.error(`Error in myCustomOperator: ${error}`);\n            return false;\n        }\n    }\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"Implement custom error handling:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface PluginError {\n    message: string;\n    level: 'warning' | 'error' | 'fatality' | 'exempt';\n    details?: any;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example error handler:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const onError = (error) => ({\n    message: `Plugin error: ${error.message}`,\n    level: determineErrorLevel(error),\n    details: {\n        stack: error.stack,\n        code: (error as any).code,\n        context: (error as any).context\n    }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sample-rules",children:"Sample Rules"}),"\n",(0,t.jsx)(n.p,{children:"Include sample rules with your plugin:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "name": "custom-plugin-rule",\n    "conditions": {\n        "all": [\n            {\n                "fact": "myCustomFact",\n                "operator": "myCustomOperator",\n                "value": "expected value"\n            }\n        ]\n    },\n    "event": {\n        "type": "warning",\n        "params": {\n            "message": "Custom rule triggered"\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.p,{children:"Create comprehensive tests:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"describe('myPlugin', () => {\n    it('should validate custom fact', async () => {\n        const result = await myFact.fn();\n        expect(result).toEqual({ result: 'custom data' });\n    });\n\n    it('should validate custom operator', () => {\n        const result = myOperator.fn('test', 'test');\n        expect(result).toBe(true);\n    });\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"publishing",children:"Publishing"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a package.json:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "name": "xfi-my-plugin",\n    "version": "1.0.0",\n    "main": "index.js",\n    "peerDependencies": {\n        "x-fidelity": "^3.0.0"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Publish to npm:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm publish\n"})}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["See ",(0,t.jsx)(n.a,{href:"plugin-examples",children:"Plugin Examples"})]}),"\n",(0,t.jsxs)(n.li,{children:["Learn ",(0,t.jsx)(n.a,{href:"best-practices",children:"Best Practices"})]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var s=r(6540);const t={},a=s.createContext(t);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);